# Implementation Plan: Speckit Visualization Dashboard

**Branch**: `001-speckit-viz-dashboard` | **Date**: 2025-12-28 | **Spec**:
[spec.md](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/spec.md)\
**Input**: Feature specification from `/specs/001-speckit-viz-dashboard/spec.md`

**Note**: This plan was generated by the `/speckit.plan` command.

## Summary

Implement a comprehensive Spec-kit documentation visualization dashboard as an
Electron desktop application. The dashboard will provide stats overview with
progress metrics, feature list with Kanban drill-down, Gantt timeline
visualization for plans, auto-generated architecture diagrams from
data-model.md, and real-time file watching for live updates. Users can configure
and switch between multiple Spec-kit projects via a dropdown interface.

**Technical Approach**: Electron desktop app with React renderer, TypeScript for
type safety, TailwindCSS 4 + HeroUI for styling/components, SQLite for parsed
metadata storage, chokidar for file watching, remark for markdown parsing,
ReactFlow for diagrams, and Recharts for metrics visualization.

## Technical Context

**Language/Version**: TypeScript 5.3+ (strict mode)\
**Primary Dependencies**: Electron 28.0, React 18.2, better-sqlite3 9.2,
chokidar 3.5, remark 15.0, ReactFlow 11.10, Recharts 2.10, @heroui/react,
TailwindCSS 4.0\
**Storage**: SQLite (embedded database at `~/.speckit-dash/data.db`)\
**Testing**: Vitest 1.0, React Testing Library 14.0, Playwright (E2E for
Electron)\
**Target Platform**: Desktop (macOS 10.15+, Windows 10+, Linux) - Cross-platform
Electron app\
**Project Type**: Electron desktop application (main process + React renderer)\
**Performance Goals**: Dashboard loads 50 features in <3s, file updates reflect
in <5s, 60 fps UI, Gantt renders 100 tasks without lag\
**Constraints**: Local file system only, no network requests, <200MB memory
footprint, offline-first\
**Scale/Scope**: Up to 100 features per project, 1000 tasks total, multiple
projects switchable

## Constitution Check

_GATE: Must pass before Phase 0 research. Re-check after Phase 1 design._

### Initial Check (Pre-Research)

- **I. Code Quality Standards**: ✅ PASS
  - TypeScript strict mode ensures type safety
  - ESLint + Prettier for style guide compliance
  - Documentation required for all public functions (JSDoc/TSDoc)
  - SOLID principles for service layer (Database, FileWatcher, Parser services)

- **II. Testing Discipline**: ✅ PASS
  - Unit tests for parsing logic, database operations (Vitest)
  - Integration tests for file watch → parse → DB update flow
  - Component tests for all React views (React Testing Library)
  - E2E tests for critical paths (Playwright)
  - Target ≥80% coverage for new code

- **III. User Experience Consistency**: ✅ PASS
  - HeroUI design system provides consistent tokens (colors, typography,
    spacing)
  - All interactive elements have hover/focus/loading states
  - Error states with actionable messages (not technical jargon)
  - Accessibility: keyboard navigation, ARIA labels (HeroUI built-in)
  - Manual validation against acceptance scenarios in quickstart.md

- **IV. Performance Requirements**: ✅ PASS
  - Latency budgets defined: <3s load, <5s file updates, <100ms UI interactions
  - Resource limits: <200MB memory, monitored via Electron DevTools
  - Virtualization for long lists (react-window for 100+ items)
  - Debouncing for file watch updates (500ms stabilization)
  - Performance benchmarks in quickstart.md manual testing section

### Post-Phase 1 Re-Check

- **I. Code Quality Standards**: ✅ PASS
  - Architecture separated into services (database, file-watcher, parser) with
    single responsibilities
  - Type definitions in contracts/ipc-api.md ensure compile-time safety
  - No duplicated logic; shared utilities planned

- **II. Testing Discipline**: ✅ PASS
  - Contract tests defined for IPC channels (contracts/ipc-api.md)
  - Integration test scenarios documented in quickstart.md
  - Test structure defined in project layout

- **III. User Experience Consistency**: ✅ PASS
  - Design system (HeroUI) ensures consistency
  - Error handling patterns defined in contracts (ErrorResponse interface)
  - Accessibility built into component library

- **IV. Performance Requirements**: ✅ PASS
  - SQLite indexes defined for query performance
  - Virtualization strategy documented for large datasets
  - Debouncing/throttling for file updates

**ALL GATES PASSED** - No violations requiring justification.

## Project Structure

### Documentation (this feature)

```text
specs/001-speckit-viz-dashboard/
├── spec.md               # Feature specification
├── plan.md               # This file
├── research.md           # Technology decisions and best practices
├── data-model.md         # Database schema and entities
├── quickstart.md         # Setup and testing guide
├── contracts/
│   └── ipc-api.md        # IPC channel contracts
└── checklists/
    └── requirements.md   # Spec quality validation
```

### Source Code (repository root)

```text
speckit-dash/
├── electron/                     # Electron main process (Node.js)
│   ├── main.ts                   # Entry point, window management
│   ├── preload.ts                # Secure context bridge (IPC)
│   ├── services/
│   │   ├── database.ts           # SQLite service (better-sqlite3)
│   │   ├── file-watcher.ts       # Chokidar file watching service
│   │   ├── parser.ts             # Remark markdown parsing service
│   │   └── ipc-handlers.ts       # IPC channel handlers
│   └── utils/
│       └── db-schema.sql         # SQLite schema initialization
│
├── src/                          # React renderer process (UI)
│   ├── main.tsx                  # React entry point
│   ├── App.tsx                   # Root component with routing
│   ├── contexts/
│   │   ├── ProjectContext.tsx    # Active project state
│   │   └── ThemeContext.tsx      # Light/dark theme
│   ├── components/               # Reusable UI components
│   │   ├── Modal.tsx             # Project config modal (HeroUI)
│   │   ├── FeatureCard.tsx       # Feature list item
│   │   ├── TaskCard.tsx          # Kanban task card
│   │   └── Navbar.tsx            # Top nav with project dropdown
│   ├── views/                    # Page-level views
│   │   ├── StatsOverview/        # Dashboard stats with charts (Recharts)
│   │   ├── FeatureList/          # Feature list with metrics
│   │   ├── KanbanBoard/          # Drag-drop Kanban (react-beautiful-dnd)
│   │   ├── GanttTimeline/        # Gantt chart with dependencies
│   │   └── ArchitectureView/     # Entity diagrams (ReactFlow)
│   ├── hooks/
│   │   ├── useIPC.ts             # IPC communication hook
│   │   └── useFileWatch.ts       # File change event listener
│   ├── services/
│   │   └── ipc.ts                # Type-safe IPC wrapper
│   └── types/
│       └── index.ts              # Shared TypeScript types
│
├── tests/
│   ├── unit/
│   │   ├── parser.test.ts        # Markdown parser tests
│   │   └── database.test.ts      # SQLite operations tests
│   ├── integration/
│   │   └── file-watch.test.ts    # File watch flow tests
│   ├── components/
│   │   └── FeatureList.test.tsx  # Component tests
│   └── e2e/
│       └── workflow.spec.ts      # Playwright E2E tests
│
├── package.json                  # Dependencies and scripts
├── tsconfig.json                 # TypeScript configuration
├── vite.config.ts                # Vite build configuration
├── tailwind.config.js            # TailwindCSS 4 configuration
└── electron-builder.yml          # Packaging configuration
```

**Structure Decision**: Electron desktop application with separated main process
(Node.js for file system/database) and renderer process (React for UI). This
follows standard Electron architecture patterns and enables secure, performant
desktop application development.

## Complexity Tracking

> No Constitution violations. All gates passed.

## Verification Plan

### Automated Tests

**Unit Tests** (Run: `npm test`)

- **Parser Service**: Test markdown parsing (spec.md, tasks.md, data-model.md)
  - Extract entities with attributes and relationships
  - Parse task checkboxes (`[ ]`, `[/]`, `[x]`)
  - Extract requirements from spec.md
  - Handle malformed markdown gracefully

- **Database Service**: Test SQLite operations
  - CRUD for all entities (projects, features, tasks, entities)
  - Index performance for common queries
  - Transaction rollback on errors
  - Cascade deletes (project → features → tasks)

- **File Watcher Service**: Test file change detection
  - Debouncing works (500ms stabilization)
  - Handles rapid successive changes
  - Emits correct events (add/change/unlink)

**Component Tests** (Run: `npm test:components`)

- **FeatureList**: Renders features, filters by status
- **KanbanBoard**: Groups tasks by status, displays phase headers
- **StatsOverview**: Renders charts with correct data
- **Modal**: Opens/closes, validates input

**Integration Tests** (Run: `npm test:integration`)

- File change → Parser → Database update → UI re-render
- Project switch → Stop old watcher → Start new watcher → Load data

**E2E Tests** (Run: `npm run test:e2e` - Playwright)

- **Test 1**: Configure project path, verify stats load
- **Test 2**: Edit spec.md externally, verify dashboard updates
- **Test 3**: Navigate feature → Kanban → verify tasks displayed
- **Test 4**: Generate architecture diagram from data-model.md

### Manual Verification

Documented in
[quickstart.md](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/quickstart.md)
under "Manual Testing Procedures".

**Critical Paths**:

1. Project configuration flow (5 min)
2. File watching and auto-updates (3 min)
3. Kanban navigation and task display (2 min)
4. Diagram generation from data-model.md (3 min)

## Dependencies

### Production Dependencies

```json
{
  "electron": "^28.0.0",
  "react": "^18.2.0",
  "react-dom": "^18.2.0",
  "react-router-dom": "^6.20.0",
  "better-sqlite3": "^9.2.0",
  "chokidar": "^3.5.0",
  "remark": "^15.0.0",
  "remark-parse": "^11.0.0",
  "remark-gfm": "^4.0.0",
  "remark-frontmatter": "^5.0.0",
  "unified": "^11.0.0",
  "reactflow": "^11.10.0",
  "dagre": "^0.8.5",
  "recharts": "^2.10.0",
  "@heroui/react": "latest",
  "tailwindcss": "^4.0.0",
  "framer-motion": "^10.0.0"
}
```

### Dev Dependencies

```json
{
  "electron-builder": "^24.9.0",
  "typescript": "^5.3.0",
  "@types/react": "^18.2.0",
  "@types/react-dom": "^18.2.0",
  "@types/node": "^20.0.0",
  "@types/better-sqlite3": "^7.6.0",
  "vite": "^5.0.0",
  "vitest": "^1.0.0",
  "@testing-library/react": "^14.0.0",
  "@testing-library/user-event": "^14.5.0",
  "@playwright/test": "^1.40.0",
  "eslint": "^8.56.0",
  "@typescript-eslint/eslint-plugin": "^6.0.0",
  "@typescript-eslint/parser": "^6.0.0",
  "prettier": "^3.1.0",
  "autoprefixer": "^10.4.0"
}
```

## Risks & Mitigations

**Risk**: SQLite database file corruption during concurrent writes\
**Mitigation**: Enable WAL (Write-Ahead Logging) mode, enforce single-writer
pattern in main process, transactions for multi-step operations

**Risk**: Large projects (100+ features) cause UI performance degradation\
**Mitigation**: Virtualize long lists with react-window, paginate database
queries (LIMIT/OFFSET), lazy load chart libraries, implement progressive
rendering

**Risk**: Markdown parsing errors break the entire dashboard\
**Mitigation**: Try-catch around all parser operations, display partial data
with error indicators, log errors to file for diagnosis, continue operation with
degraded data

**Risk**: File watcher consumes excessive system resources\
**Mitigation**: Watch only essential file patterns (`**/*.md`), debounce updates
(500ms), implement max concurrent parse operations limit (5), allow user to
disable file watching

**Risk**: Electron bundle size exceeds acceptable limits (>300MB)\
**Mitigation**: Code splitting for views, lazy load diagram libraries
(ReactFlow), tree-shaking via Vite, compress assets with electron-builder,
measure bundle size in CI

**Risk**: Cross-platform compatibility issues (macOS vs Windows vs Linux)\
**Mitigation**: Test on all three platforms during development, use path.join
for cross-platform paths, electron-builder handles platform-specific packaging

## Next Steps

1. **Generate Tasks**: Run `/speckit.tasks` to create detailed task breakdown
   from this plan
2. **Implementation**: Execute tasks in dependency order (Setup → Core Services
   → UI Components → Integration → Testing)
3. **Continuous Validation**: Run automated tests after each major component
4. **Manual Verification**: Perform quickstart.md testing procedures at
   milestones
5. **Documentation**: Update walkthrough.md with implementation results and
   screenshots

## References

- [Feature Specification](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/spec.md)
- [Technical Research](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/research.md)
- [Data Model](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/data-model.md)
- [IPC Contracts](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/contracts/ipc-api.md)
- [Quick Start Guide](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/specs/001-speckit-viz-dashboard/quickstart.md)
- [SpecKit Constitution](file:///Users/moment/Projects/personal/projects/saas/speckit-dash/.specify/memory/constitution.md)
